<mat-toolbar>
	<img src="/assets/iconHelpper.ico"> 
	<span>Crud Helpper</span>
</mat-toolbar>

<div class="main-wrapper">

	<button mat-fab class="add-person" (click)="addPerson()" *ngIf="!selectedPerson">CADASTRAR HELPPER</button>
	
	<table mat-table [dataSource]="persons" class="mat-elevation-z8" *ngIf="!selectedPerson">
		
		<tr mat-header-row *matHeaderRowDef="columns"></tr>
		
		<tr mat-row *matRowDef="let myRowData; columns: columns"></tr>

		<ng-container matColumnDef="name">
			<th class= "field" mat-header-cell *matHeaderCellDef> Nome </th>
			<td mat-cell *matCellDef="let person"> {{person.name}} </td>
		</ng-container>

		<ng-container matColumnDef="lastName">
			<th class= "field" mat-header-cell *matHeaderCellDef> Sobrenome </th>
			<td mat-cell *matCellDef="let person"> {{person.lastName}} </td>
		</ng-container>

		<ng-container matColumnDef="cpf">
			<th class= "field" mat-header-cell *matHeaderCellDef> CPF </th>
			<td mat-cell *matCellDef="let person"> {{person.cpf}} </td>
		</ng-container>

		<ng-container matColumnDef="phone">
			<th class= "field" mat-header-cell *matHeaderCellDef> Telefone </th>
			<td mat-cell *matCellDef="let person"> {{person.phone}} </td>
		</ng-container>

		<ng-container matColumnDef="email">
			<th class= "field" mat-header-cell *matHeaderCellDef> E-mail </th>
			<td mat-cell *matCellDef="let person"> {{person.email}} </td>
		</ng-container>

		<ng-container matColumnDef="cep">
			<th class= "field" mat-header-cell *matHeaderCellDef> CEP </th>
			<td mat-cell *matCellDef="let person"> {{person.cep}} </td>
		</ng-container>

		<ng-container matColumnDef="state">
			<th class= "field" mat-header-cell *matHeaderCellDef> Estado </th>
			<td mat-cell *matCellDef="let person"> {{person.state}} </td>
		</ng-container>

		<ng-container matColumnDef="city">
			<th class= "field" mat-header-cell *matHeaderCellDef> Cidade </th>
			<td mat-cell *matCellDef="let person"> {{person.city}} </td>
		</ng-container>

		<ng-container matColumnDef="street">
			<th class= "field" mat-header-cell *matHeaderCellDef> Logradouro </th>
			<td mat-cell *matCellDef="let person"> {{person.street}} </td>
		</ng-container>

		<ng-container matColumnDef="neighborhood">
			<th class= "field" mat-header-cell *matHeaderCellDef> Bairro </th>
			<td mat-cell *matCellDef="let person"> {{person.neighborhood}} </td>
		</ng-container>

		<ng-container matColumnDef="numberHome">
			<th class= "field" mat-header-cell *matHeaderCellDef> Nº da casa </th>
			<td mat-cell *matCellDef="let person"> {{person.numberHome}} </td>
		</ng-container>

		
		<ng-container matColumnDef="actions">
			<th class= "field" mat-header-cell *matHeaderCellDef> Ações </th>
			<td mat-cell *matCellDef="let person">
				
				<button mat-icon-button class="edit" (click)="editPerson(person)">
					<mat-icon>edit</mat-icon>
				</button>
				
				<button mat-fab class="delete" (click)="deletePerson(person)">
					<mat-icon>delete</mat-icon>
				</button>		
				
			</td>			
		</ng-container>
		
	</table>  

	<div class="loading" *ngIf="loading">Aguarde...</div>
	
	<div class="form" *ngIf="selectedPerson">

		<form (ngSubmit)="submit(selectedPerson)">
	
			<mat-form-field appearance="outline">
				<mat-label>Nome</mat-label>
				<input matInput  [(ngModel)]="selectedPerson.name" name="name" required>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Sobrenome</mat-label>
				<input matInput  [(ngModel)]="selectedPerson.lastName" name="lastName" required>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>CPF</mat-label>
				<input type="text" maxlength="11" matInput [(ngModel)]="selectedPerson.cpf" name="cpf" required>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Telefone</mat-label>
				<input type="tel" matInput [(ngModel)]="selectedPerson.phone" name="phone" required>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Email</mat-label>
				<input matInput type="email" [(ngModel)]="selectedPerson.email" name="email"  required>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>CEP</mat-label>
				<input type="text" matInput [(ngModel)]="selectedPerson.cep" name="cep" (keyup)="changeCep($event)" required>
			</mat-form-field>

			<mat-form-field appearance="outline" class="readonly">
				<mat-label>Estado</mat-label>
				<input matInput readonly [(ngModel)]="selectedPerson.state" name="state" required>
			</mat-form-field>

			<mat-form-field appearance="outline" class="readonly">
				<mat-label>Cidade</mat-label>
				<input matInput readonly [(ngModel)]="selectedPerson.city" name="city" required>
			</mat-form-field>

			<mat-form-field appearance="outline" class="readonly">
				<mat-label>Logradouro</mat-label>
				<input matInput readonly [(ngModel)]="selectedPerson.street" name="street" required>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Bairro</mat-label>
				<input type="text" matInput [(ngModel)]="selectedPerson.neighborhood" name="neighborhood" required>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Nº da casa</mat-label>
				<input type="tel" matInput [(ngModel)]="selectedPerson.numberHome" name="numberHome" required>
			</mat-form-field>
			
			<div id="buttons">
				<button mat-stroked-button class="cancel" (click)="cancel()">Cancelar</button>

				<button mat-stroked-button class="save">Salvar</button>
			</div>
		</form>
	</div>
</div>

